<!DOCTYPE html>
<html>
<head>
    <title>VisioNova - Backend Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #0066cc;
            padding-bottom: 10px;
        }
        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-weight: bold;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.loading {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        button {
            background: #0066cc;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
        }
        button:hover {
            background: #0052a3;
        }
        .result {
            background: #f9f9f9;
            padding: 15px;
            border-left: 4px solid #0066cc;
            margin: 15px 0;
            border-radius: 5px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úì VisioNova Backend Test</h1>
        
        <div id="serverStatus" class="status loading">
            üîÑ Checking backend server...
        </div>

        <h2>Test Text Detection</h2>
        <textarea id="testText" placeholder="Enter text to analyze...">hey whats up? yeah i totally get what you mean lol</textarea>
        
        <button onclick="analyzeText()">Analyze Text</button>
        
        <div id="result" style="display:none;" class="result"></div>
        
        <h2>Sample Texts</h2>
        <button onclick="setHumanText()">Load Human Text Example</button>
        <button onclick="setAIText()">Load AI Text Example</button>
    </div>

    <script>
        const API_URL = 'http://localhost:5000';

        // Check server status on page load
        window.addEventListener('load', checkServer);

        async function checkServer() {
            try {
                const response = await fetch(API_URL + '/');
                if (response.ok) {
                    document.getElementById('serverStatus').innerHTML = '‚úì Backend is running on http://localhost:5000';
                    document.getElementById('serverStatus').className = 'status success';
                } else {
                    document.getElementById('serverStatus').innerHTML = '‚úó Backend server returned an error';
                    document.getElementById('serverStatus').className = 'status error';
                }
            } catch (e) {
                document.getElementById('serverStatus').innerHTML = '‚úó Backend server is not running. Please start it with: python run_server.py';
                document.getElementById('serverStatus').className = 'status error';
            }
        }

        async function analyzeText() {
            const text = document.getElementById('testText').value;
            if (!text.trim()) {
                alert('Please enter some text to analyze');
                return;
            }

            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'üîÑ Analyzing...';
            resultDiv.style.display = 'block';

            try {
                const response = await fetch(API_URL + '/api/detect-ai', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ text: text })
                });

                if (!response.ok) {
                    throw new Error(`HTTP Error: ${response.status}`);
                }

                const data = await response.json();
                resultDiv.innerHTML = JSON.stringify(data, null, 2);
                resultDiv.style.color = '#333';
            } catch (error) {
                resultDiv.innerHTML = '‚ùå Error:\n' + error.message + '\n\nMake sure the backend is running:\npython run_server.py';
                resultDiv.style.color = '#d32f2f';
            }
        }

        function setHumanText() {
            document.getElementById('testText').value = 'hey whats up? yeah i totally get what you mean lol. like when i was trying to learn python last year i was so confused at first but then it just clicked you know?';
        }

        function setAIText() {
            document.getElementById('testText').value = 'Furthermore, it is important to note that learning programming requires dedication and consistent practice. Additionally, one should leverage available resources such as online tutorials and documentation. In conclusion, the journey of learning to code is both challenging and rewarding.';
        }
    </script>
</body>
</html>
